
:root{
  --bg:#0b0b0b;
  --panel:#151515;
  --card:#1c1c1c;
  --muted:#7b8;
  --accent:#0b5;
  --text:#e8e8e8;
  --warn:#f39c12;
  --danger:#ff5a5f;
}
*{box-sizing:border-box}
html,body{height:100%;margin:0;background:#000;color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Ubuntu,"Helvetica Neue",Arial,sans-serif}
button, input, select, textarea{font:inherit}
.app-header, .app-footer{display:flex;align-items:center;gap:.75rem;padding:.5rem .75rem;background:linear-gradient(0deg, #0e0e0e, #161616);border-bottom:1px solid #222}
.app-footer{position:sticky;bottom:0;border-top:1px solid #222;border-bottom:none;justify-content:space-between}
.brand{display:flex;align-items:center;gap:.5rem}
.logo{display:inline-grid;place-items:center;width:28px;height:28px;background:var(--accent);color:#000;border-radius:6px;font-weight:700}
.steps{display:flex;gap:.25rem;flex-wrap:wrap}
.step{background:#111;color:#aaa;border:1px solid #222;border-radius:8px;padding:.35rem .6rem}
.step.active{background:#0b5;color:#000;border-color:#0b5;font-weight:600}
.header-actions{margin-left:auto;display:flex;gap:.5rem}

#main{display:flex;min-height:calc(100vh - 96px)}
.panel{width:360px;max-width:44vw;background:var(--panel);border-right:1px solid #222;overflow:auto}
.panel-section{display:none;padding:1rem;border-bottom:1px solid #222}
.panel-section.visible{display:block}
.field{margin:.75rem 0}
.field.inline{display:flex;align-items:center;gap:.5rem;flex-wrap:wrap}
.palette{display:flex;gap:.25rem;flex-wrap:wrap}
.palette .swatch{width:26px;height:26px;border:2px solid #333;border-radius:4px;cursor:pointer}
.palette .swatch.selected{outline:3px solid var(--accent)}
.toolbar{display:flex;gap:.35rem;flex-wrap:wrap}
.button,button{background:#111;color:#ddd;border:1px solid #333;border-radius:8px;padding:.4rem .7rem;cursor:pointer}
.button-primary, button.button-primary{background:var(--accent);color:#000;border-color:var(--accent)}
.button:disabled{opacity:.6;cursor:not-allowed}
.hint{font-size:.9rem;color:#9ab}
.list{list-style:none;padding:0;margin:.5rem 0;display:grid;gap:.5rem}
.list li{background:var(--card);padding:.5rem;border:1px solid #222;border-radius:8px}
.report{background:var(--card);padding:.5rem;border:1px solid #222;border-radius:8px;min-height:2rem}

.canvas-wrap{position:relative;flex:1;display:grid;place-items:center;background:#050505}
#plan-canvas,#overlay-canvas{max-width:100%;height:auto;touch-action:none}
#overlay-canvas{position:absolute;left:0;top:0;pointer-events:none}
.alerts{position:absolute;left:1rem;top:1rem;display:grid;gap:.5rem;z-index:3}
.alert{background:#111;border-left:4px solid var(--warn);padding:.5rem .75rem;border-radius:6px;border:1px solid #222;color:#ddd;max-width:min(86vw,560px)}
.alert.error{border-left-color:var(--danger)}

.spinner{position:absolute;inset:0;display:none;place-items:center;background:rgba(0,0,0,0.35);z-index:2}
.spinner.visible{display:grid}
.spinner .dot{width:10px;height:10px;border-radius:50%;background:#0b5;animation:blip 1s infinite ease-in-out alternate}
@keyframes blip{to{transform:scale(1.8);opacity:.6}}

@media (max-width: 900px){
  .panel{width:100%;max-width:none}
  #main{flex-direction:column}
  .steps{display:none}
}
